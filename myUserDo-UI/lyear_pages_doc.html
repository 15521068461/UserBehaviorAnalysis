<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>首页 - 光年(Light Year Admin)后台管理系统模板</title>
<link rel="icon" href="favicon.ico" type="image/ico">
<meta name="keywords" content="LightYear,光年,后台模板,后台管理系统,光年HTML模板">
<meta name="description" content="LightYear是一个基于Bootstrap v3.3.7的后台管理系统的HTML模板。">
<meta name="author" content="yinqi">
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/materialdesignicons.min.css" rel="stylesheet">
<link href="css/style.min.css" rel="stylesheet">
<style>
.input-sm{
	width: 600px;
}
#example-textarea-input{
	width: 600px;
}
  .btn-w-md {
    margin-top: 30px;
    margin-left: 30px;
}
.masonry-item{
	float: right;
}
</style>
</head>
  
<body>
<div class="lyear-layout-web">
  <div class="lyear-layout-container">
    <!--左侧导航-->
    <aside class="lyear-layout-sidebar">
      
      <!-- logo -->
      <div id="logo" class="sidebar-header">
        <a href="index.html"><img src="images/logo-sidebar.png" title="LightYear" alt="LightYear" /></a>
      </div>
      <div class="lyear-layout-sidebar-scroll"> 
        
        <nav class="sidebar-main">
          <ul class="nav nav-drawer">
         
			
			
            <li class="nav-item nav-item-has-subnav">
              <a href="javascript:void(0)"><i class="mdi mdi-file-outline"></i> 工作台</a>
              <ul class="nav nav-subnav">
                <li> <a href="index.html">数据工作台</a> </li>
              </ul>
            </li>

        <li class="nav-item nav-item-has-subnav">
              <a href="javascript:void(0)"><i class="mdi mdi-file-outline"></i> 系统管理</a>
              <ul class="nav nav-subnav">
                <li> <a href="label.html">行为标签</a> </li>
              </ul>
            </li>
			
			
			
		<li class="nav-item nav-item-has-subnav">
		  <a href="javascript:void(0)"><i class="mdi mdi-file-outline"></i> 数据报表</a>
		  <ul class="nav nav-subnav">
		    <li> <a href="labelReport.html">通用报表</a> </li>
		    <li> <a href="dailyReport.html">日活报表</a> </li>
		  </ul>
		</li>	


           <li class="nav-item nav-item-has-subnav active open">
              <a href="javascript:void(0)"><i class="mdi mdi-file-outline"></i> 个人中心</a>
              <ul class="nav nav-subnav">
                <li class="active"> <a href="lyear_pages_doc.html">账户设置</a> </li>
              </ul>
            </li>





          </ul>
        </nav>
        
        <div class="sidebar-footer">
          <p class="copyright">Copyright &copy; 2019. <a target="_blank" href="http://lyear.itshubao.com">IT书包</a> All rights reserved.</p>
        </div>
      </div>
      
    </aside>
    <!--End 左侧导航-->
    
    <!--头部信息-->
    <header class="lyear-layout-header">
      
      <nav class="navbar navbar-default">
        <div class="topbar">
          
          <div class="topbar-left">
            <div class="lyear-aside-toggler">
              <span class="lyear-toggler-bar"></span>
              <span class="lyear-toggler-bar"></span>
              <span class="lyear-toggler-bar"></span>
            </div>
            <span class="navbar-page-title"> 个人中心 </span>
          </div>
          
          <ul class="topbar-right">
            <li class="dropdown dropdown-profile">
              <a href="javascript:void(0)" data-toggle="dropdown">
                <img class="img-avatar img-avatar-48 m-r-10" src="images/users/avatar.jpg" alt="笔下光年" />
                <span>笔下光年 <span class="caret"></span></span>
              </a>
              <ul class="dropdown-menu dropdown-menu-right">
                <li> <a href="lyear_pages_profile.html"><i class="mdi mdi-account"></i> 个人信息</a> </li>
                <li> <a href="lyear_pages_edit_pwd.html"><i class="mdi mdi-lock-outline"></i> 修改密码</a> </li>
                <li> <a href="javascript:void(0)"><i class="mdi mdi-delete"></i> 清空缓存</a></li>
                <li class="divider"></li>
                <li><a onclick="logout()"> <i class="mdi mdi-logout-variant" ></i>退出登录</a></li>
              </ul>
            </li>
            <!--切换主题配色-->
		    <li class="dropdown dropdown-skin">
			  <span data-toggle="dropdown" class="icon-palette"><i class="mdi mdi-palette"></i></span>
			  <ul class="dropdown-menu dropdown-menu-right" data-stopPropagation="true">
                <li class="drop-title"><p>主题</p></li>
                <li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="site_theme" value="default" id="site_theme_1" checked>
                    <label for="site_theme_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="site_theme" value="dark" id="site_theme_2">
                    <label for="site_theme_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="site_theme" value="translucent" id="site_theme_3">
                    <label for="site_theme_3"></label>
                  </span>
                </li>
			    <li class="drop-title"><p>LOGO</p></li>
				<li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="logo_bg" value="default" id="logo_bg_1" checked>
                    <label for="logo_bg_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_2" id="logo_bg_2">
                    <label for="logo_bg_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_3" id="logo_bg_3">
                    <label for="logo_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_4" id="logo_bg_4">
                    <label for="logo_bg_4"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_5" id="logo_bg_5">
                    <label for="logo_bg_5"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_6" id="logo_bg_6">
                    <label for="logo_bg_6"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_7" id="logo_bg_7">
                    <label for="logo_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="logo_bg" value="color_8" id="logo_bg_8">
                    <label for="logo_bg_8"></label>
                  </span>
				</li>
				<li class="drop-title"><p>头部</p></li>
				<li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="header_bg" value="default" id="header_bg_1" checked>
                    <label for="header_bg_1"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_2" id="header_bg_2">
                    <label for="header_bg_2"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_3" id="header_bg_3">
                    <label for="header_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="header_bg" value="color_4" id="header_bg_4">
                    <label for="header_bg_4"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_5" id="header_bg_5">
                    <label for="header_bg_5"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_6" id="header_bg_6">
                    <label for="header_bg_6"></label>                      
                  </span>                                                    
                  <span>                                                     
                    <input type="radio" name="header_bg" value="color_7" id="header_bg_7">
                    <label for="header_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="header_bg" value="color_8" id="header_bg_8">
                    <label for="header_bg_8"></label>
                  </span>
				</li>
				<li class="drop-title"><p>侧边栏</p></li>
				<li class="drop-skin-li clearfix">
                  <span class="inverse">
                    <input type="radio" name="sidebar_bg" value="default" id="sidebar_bg_1" checked>
                    <label for="sidebar_bg_1"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_2" id="sidebar_bg_2">
                    <label for="sidebar_bg_2"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_3" id="sidebar_bg_3">
                    <label for="sidebar_bg_3"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_4" id="sidebar_bg_4">
                    <label for="sidebar_bg_4"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_5" id="sidebar_bg_5">
                    <label for="sidebar_bg_5"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_6" id="sidebar_bg_6">
                    <label for="sidebar_bg_6"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_7" id="sidebar_bg_7">
                    <label for="sidebar_bg_7"></label>
                  </span>
                  <span>
                    <input type="radio" name="sidebar_bg" value="color_8" id="sidebar_bg_8">
                    <label for="sidebar_bg_8"></label>
                  </span>
				</li>
			  </ul>
			</li>
            <!--切换主题配色-->
          </ul>
          
        </div>
      </nav>
      
    </header>
    <!--End 头部信息-->
    
	
	<!--页面主要内容-->
	<main class="lyear-layout-content">
	  
	  <div class="container-fluid">

	    <h2>基本设置</h2>
		
		<div class="edit-avatar col-xs-12">
			
			
	<!-- <img src="/images/users/a.jpg" alt="..." class="img-avatar"> -->
	<input type="text" id="userLogo"/>
	 
	  <div class="avatar-divider"></div>
	  <div class="edit-avatar-content">
		  
		<form enctype="multipart/form-data">
		           <p><input type="file" id="avator" /></p>
		           <p><input type="submit" id="submit" value="确定修改" onclick="upload()"/></p>
		       </form>
			   
		<p class="m-0">选择一张你喜欢的图片</p>
	  </div>
	</div>
		
		
		
		<div class="form-group col-xs-12">
		<label for="example-input-small">姓名:</label>
		<input class="form-control input-sm" type="text" id="userName" 
		name="example-input-small" placeholder="请输入姓名:" />
	  </div>
		
		<div class="example-box col-xs-12">
			<label for="example-input-small">性别:</label><br/>
	  <label class="lyear-radio radio-inline radio-primary">
		<input type="radio" name="e" id="nan" ><span>男</span>
	  </label>
	  <label class="lyear-radio radio-inline radio-primary">
		<input type="radio" name="e" id="nv" ><span>女</span>
	  </label>
<br/><br/>
	</div>
	
	
	<div class="form-group col-xs-12">
			<label for="example-input-small">手机号码:</label>
			<input class="form-control input-sm" type="text" id="phone" name="example-input-small" placeholder="请输入手机号:">
	</div>
	    
		<div class="form-group">
		<label class="col-xs-12" for="example-textarea-input">个人简介:</label>
		<div class="col-xs-12">
		  <textarea class="form-control" id="userIntro" name="example-textarea-input" rows="6" placeholder="内容.."></textarea>
		</div>
	  </div>
		<button class="btn btn-w-md btn-round btn-primary" onclick="doBase()" >更改信息</button>
		<button onclick="window.location.href='lyear_pages_doc2 .html'" class="btn btn-w-md btn-round btn-secondary">安全设置-></button>
		
		      
		
	  </div>
	  
	</main>
	<!--End 页面主要内容-->
	
	
	

  </div>
</div>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/perfect-scrollbar.min.js"></script>
<script type="text/javascript" src="js/main.min.js"></script>

<!--图表插件-->
<script type="text/javascript" src="js/Chart.js"></script>
<script type="text/javascript">
	console.log(sessionStorage.getItem("token"));
    var	purl = null
	var response = null ; 
	$(function() {
	
  $.ajax({
			type:'GET',       		
			url:'http://127.0.0.1:9998/myUserDo/auth/personal/account/list', 
			headers: {  
			        token:sessionStorage.getItem("token")
			    },
			crossDomain: true,
			xhrFields:{
				withCredentials:true
			},
			contentType: "application/json; charset=utf-8",
			dataType: 'json', 
			success: function(resp){  
				console.log(resp);
				response = resp.data ;
				if(resp.code === 200) {	
					$('#userName').val(response.userName);
					if(response.userSex===1){
						$('#nan').prop("checked",'checked');
					}else{
						$('#nv').prop("checked",'checked');
					}
					$('#phone').val(response.userMobile);
					$('#userIntro').val(response.userIntro);
					$('#userLogo').val(response.userLogo);
				//	$("img")[0].src=response.userLogo;
					 sessionStorage.setItem("userMobile",response.userMobile) ;
				}
				else
					alert('出错:' + resp.msg);
			},
			error: function(jqXHR, textStatus, errorThrown)
			{
				alert("错误:" + jqXHR.status);
			}
		});
	})
	
    function doBase(){
    // 请求参数
   
    		var req = {};
    		req.userName = $('#userName').val();	
    		req.userIntro =$('#userIntro').val();
    		req.userLogo = $('#userLogo').val();
			if($("#nan").is(":checked")){
				req.userSex = 1 ;
			}else{
				req.userSex = 2 ;
			}
			
    		// 转成 JSON 字符串
    		var jsonstr = JSON.stringify(req);
    
    		
        $.ajax({
    			type:'PUT',       		
    			url:'http://127.0.0.1:9998/myUserDo/auth/personal/account/base', 
    			headers: {  
    			        token: sessionStorage.token 
    			    },
    			crossDomain: true,
    			xhrFields:{
    				withCredentials:true
    			},
    			contentType: "application/json; charset=utf-8",
    			data: jsonstr,    /*  JSON字符串*/
    			dataType: 'json', 
    			success: function(resp){  
    				console.log(resp);
    				if(resp.code === 200) {
    					alert('成功');
    				}
    				else
    					alert('出错:' + resp.msg);
    			},
    			error: function(jqXHR, textStatus, errorThrown)
    			{
    				alert("错误:" + jqXHR.status);
    			}
    		});
       }


 function logout(){
	  alert("搜索");
	  $.ajax({
	  		type:'POST',       		
	  		url:'http://127.0.0.1:9998/myUserDo/open/user/logout', 
	  		headers: {  
	  		        token: sessionStorage.token 
	  		    },
	  		crossDomain: true,
	  		xhrFields:{
	  			withCredentials:true
	  		},
	  		contentType: "application/json; charset=utf-8",
	  		dataType: 'json', 
	  		success: function(resp){  
	  			console.log(resp);
	  			if(resp.code === 200) {
	  				alert('成功');
	  				 
	  			}
	  			else
	  				alert('出错:' + resp.msg);
	  		},
	  		error: function(jqXHR, textStatus, errorThrown)
	  		{
	  			alert("错误:" + jqXHR.status);
	  		}
	  	});
	  
	  
	 window.location.href='lyear_pages_login_3.html';
  }

  function upload(){
	  $("form").submit(function () {
	      var avator = $('#avator').get(0).files[0]; //获取上传的文件;//get(0)将Jquery对象转换为DOM对象
	      var formData = new FormData();  //创建一个forData
	      formData.append('avator', avator);
	      $.ajax({
	          url: 'http://127.0.0.1:9998/myUserDo/open/common/upload',
			  headers: {
			          token:sessionStorage.getItem("token")
			      },
	          method: 'post',
	  		crossDomain: true,
	  		xhrFields:{
	  			withCredentials:true
	  		},
	          data: formData,
	          dataType: 'json',
	          processData: false,//数据处理
	          contentType: false,//内容类型
	          cache: true,
	          async: true,
	         success: function(resp){
	         	var	purl = resp.data.filePath
				console.log("文件的路径为:"+purl);
	       alert("成功");
	         },
	          error: (error) => {
	  			alert("失败");
	          }
	      })
	  });
	  
  }



</script>
</body>
</html>